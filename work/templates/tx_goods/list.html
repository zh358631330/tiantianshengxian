{%extends 'base.html'%}
{%block head%}
    <script>
        $(function () {
            $('.sort_bar a').click(function () {
                $(this).addClass('active').siblings().removeClass('active');
            })
            $.get('/detail{{tid}}_{{pid}}_/',function(){

            });
        });
    </script>
{%endblock head%}
{%block content%}

	<div class="navbar_con">
		<div class="navbar clearfix">
			<div class="subnav_con fl">
				<h1>全部商品分类</h1>	
				<span></span>			
				<ul class="subnav">
					<li><a href="/list1_1_1/" class="fruit">新鲜水果</a></li>
					<li><a href="/list2_1_1" class="seafood">海鲜水产</a></li>
					<li><a href="/list3_1_1" class="meet">猪牛羊肉</a></li>
					<li><a href="/list4_1_1" class="egg">禽类蛋品</a></li>
					<li><a href="/list5_1_1" class="vegetables">新鲜蔬菜</a></li>
					<li><a href="/list6_1_1" class="ice">速冻食品</a></li>
				</ul>
			</div>
			<ul class="navlist fl">
				<li><a href="/">首页</a></li>
				<li class="interval">|</li>
				<li><a href="#">手机生鲜</a></li>
				<li class="interval">|</li>
				<li><a href="#">抽奖</a></li>
			</ul>
		</div>
	</div>

	<div class="breadcrumb">
		<a href="#">全部分类</a>
		<span>></span>
		<a href="#">{{title}}</a>
	</div>

	<div class="main_wrap clearfix">
		<div class="l_wrap fl clearfix">
			<div class="new_goods">
				<h3>新品推荐</h3>
				<ul>
					{%for click in t1_click%}
					<li>
						<a href="/detail{{tid}}_{{click.id}}/"><img src="/static/{{click.gpic}}"></a>
						<h4><a href="/detail{{tid}}_{{click.id}}/">{{click.gtitle}}</a></h4>
						<div class="prize">￥{{click.gprice}}</div>
					</li>
					{%endfor%}


				</ul>
			</div>
		</div>

		<div class="r_wrap fr clearfix">
			<div class="sort_bar">
				<a href="javascript:;" class="active">默认</a>
				<a href="javascript:;">价格</a>
				<a href="javascript:;">人气</a>
			</div>

			<ul class="goods_type_list clearfix">
				{%for new in page%}
				<li>
					<a href="/detail{{tid}}_{{new.id}}/"><img src="/static/{{new.gpic}}"></a>
					<h4><a href="/detail{{tid}}_{{new.id}}/">{{new.gtitle}}</a></h4>
					<div class="operate">
						<span class="prize">￥{{new.gprice}}</span>
						<span class="unit">{{new.gprice}}/{{new.gunit}}</span>
						<a href="#" class="add_goods" title="加入购物车"></a>
					</div>
				</li>
				{%endfor%}

			</ul>

			<div class="pagenation">
                <a href="/list{{tid}}_1_1/">首页</a>
				{% if page.has_previous %}

					<a href="/list{{tid}}_{{page.number|add:-1}}_1/"><上一页</a>
                    {{page.paginator.num_pages}}
				{%endif%}


                {% if page.paginator.num_pages <= 5 %}

                        {% for index in page.paginator.page_range%}
                        {%if index == page.number%}
                            <a href="#" class="active">{{index}}</a>
                        {%else%}
                            <a href="/list{{tid}}_{{index}}_{{sid}}/">{{index}}</a>
                        {%endif%}
                        {%endfor%}

                {%elif page.number == 1%}
                    <a href="/list{{tid}}_1/" class="active">1</a>
                    <a href="/list{{tid}}_2/">2</a>
                    <a href="/list{{tid}}_3/">3</a>
                    <a href="/list{{tid}}_4/">4</a>
                    <a href="/list{{tid}}_5/">5</a>
                {%elif page.number == 2%}
                    <a href="/list{{tid}}_1/">1</a>
                    <a href="/list{{tid}}_2/" class="active">2</a>
                    <a href="/list{{tid}}_3/">3</a>
                    <a href="/list{{tid}}_4/">4</a>
                    <a href="/list{{tid}}_5/">5</a>
                {% elif page.number == page.paginator.num_pages|add:-1%}
                    <a href="/list{{tid}}_{{page.number|add:-3}}/">{{ page.number|add:-3 }}</a>
                    <a href="/list{{tid}}_{{page.number|add:-2}}/">{{page.number|add:-2}}</a>
                    <a href="/list{{tid}}_{{page.number|add:-1}}/">{{page.number|add:-1}}</a>
                    <a href="#"  class="active">{{page.number}}</a>
                    <a href="/list{{tid}}_{{page.number|add:1}}/" >{{page.number|add:1}}</a>

                {%elif page.number == page.paginator.num_pages%}
                    <a href="/list{{tid}}_{{page.number|add:-4}}/">{{page.number|add:-4}}</a>
                    <a href="/list{{tid}}_{{page.number|add:-3}}/">{{page.number|add:-3}}</a>
                    <a href="/list{{tid}}_{{page.number|add:-2}}/">{{page.number|add:-2}}</a>
                    <a href="/list{{tid}}_{{page.number|add:-1}}/">{{page.number|add:-1}}</a>
                    <a href="/list{{tid}}_{{page.number}}/" class="active">{{page.number}}</a>
                {%else%}
                    <a href="/list{{tid}}_{{page.number|add:-2}}/">{{page.number|add:-2}}</a>
                    <a href="/list{{tid}}_{{page.number|add:-1}}/">{{page.number|add:-1}}</a>
                    <a href="/list{{tid}}_{{page.number}}/" class="active">{{page.number}}</a>
                    <a href="/list{{tid}}_{{page.number|add:1}}/">{{page.number|add:1}}</a>
                    <a href="/list{{tid}}_{{page.number|add:2}}/" >{{page.number|add:2}}</a>

                {%endif%}


                {% if page.has_next %}
					<a href="/list{{tid}}_{{page.number|add:1}}/"><下一页</a>

                {%endif%}
                    <a href="/list{{tid}}_{{ page.paginator.num_pages }}/">末页</a>
			</div>
		</div>
	</div>


{%endblock content%}